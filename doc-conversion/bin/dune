(executable
 (name ortografe_cli)
 (libraries cmdliner cmdliner_bindops ortografe dict_gen yojson)
 (preprocess (pps ppx_jane ppx_lazy_option_op)))

(rule
 (deps
   (sandbox always)
   (:lexique %{project_root}/data/lexique/Lexique383.gen.tsv))
 (action (with-stdout-to dict.ml
          (run bash
               -euo pipefail
               -c "echo -n 'let data_lexique_Lexique383_gen_tsv = {|'; cat %{lexique}; echo '|}';"))))
