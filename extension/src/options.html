<!doctype html>

<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <style>
      body {
          font-size: 1rem; /* it seems like 1rem should do nothing, but it's much bigger/better
                              in chrome */
          line-height: 1.3;
      }
      .btn:hover {
          background-color: #d9d9d9;
      }
      .btn {
          background-color: #ededed;
          border: 1px solid grey;
          border-radius: 4px;
          line-height: 1.875;
          padding: 3px 4px;
      }

      .idle {
          visibility: hidden;
      }
/* https://cssload.net/en/spinners */
#floatingCirclesG {
    position:relative;
    width:32px;
    height:18px;
    margin:auto;
    transform:scale(0.6);
}

.f_circleG{
    position:absolute;
    background-color:rgb(255,255,255);
    height:6px;
    width:6px;
    border-radius:3px;
    animation-name:f_fadeG;
    animation-duration:1.2s;
    animation-iteration-count:infinite;
    animation-direction:normal;
}

#frotateG_01{
    left:0;
    top:13px;
    animation-delay:0.45s;
}

#frotateG_02{
    left:4px;
    top:4px;
    animation-delay:0.6s;
}

#frotateG_03{
    left:13px;
    top:0;
    animation-delay:0.75s;
}

#frotateG_04{
    right:4px;
    top:4px;
    animation-delay:0.9s;
}

#frotateG_05{
    right:0;
    top:13px;
    animation-delay:1.05s;
}

#frotateG_06{
    right:4px;
    top:20px;
    animation-delay:1.2s;
}

#frotateG_07{
    left:13px;
    top:24px;
    animation-delay:1.35s;
}

#frotateG_08{
    left:4px;
    top:20px;
    animation-delay:1.5s;
}

@keyframes f_fadeG{
    0%{
        background-color:rgb(0,0,0);
    }

    100%{
        background-color:rgb(255,255,255);
    }
}
    </style>
  </head>

  <body style="min-width:25em;">
    <form>
    <fieldset>
      <legend>Configuration:</legend>

      <div>
        <input type="checkbox" id="color-checkbox" name="color-checkbox">
        <label for="color-checkbox">surligner les mots réécrits</label>
      </div>
      <br>
      <div>
        Comment réécrire :
        <div>
          <input type="radio" id="rewrite-disable" name="rewrite-radio" value="disable">
          <label for="rewrite-disable">ne rien réécrire</label>
        </div>
        <div>
          <input type="radio" id="rewrite-erofa" name="rewrite-radio" value="erofa">
          <label for="rewrite-erofa">convertir vers l'orthographe érofa (défaut)</label>
        </div>
        <div>
          <input type="radio" id="rewrite-rect1990" name="rewrite-radio" value="rect1990">
          <label for="rewrite-rect1990">convertir vers les rectifications de 1990</label>
        </div>
        <div>
          <input type="radio" id="rewrite-custom" name="rewrite-radio" value="custom">
          <label for="rewrite-custom">convertir avec un dictionnaire que vous chargez</label>
          (actuellement : <span id="dict"></span>)
        </div>
      </div>
      <br>
      <!-- We make people go to the options page, because file input basically doesn't
           work in popup windows. Essentially, the focus moves away from the popup when
           the user chooses the file, which makes the popup go away, which prevents
           anything callback from running. For more details:
           https://discourse.mozilla.org/t/webextension-prevent-a-popup-panel-to-hide-itself/17857.
        -->
      <div id="open-options-page">
        <button>
          Ouvrir la page d'options pour charger un dictionnaire
        </button>
      </div>

      <div id="load-dict-section">
        <form>
          <div>
            <label for="load-dict-input" class="btn">charger un dictionnaire depuis un fichier</label>
            <input style="display:none" type="file" id="load-dict-input">
          </div>
          <div id='file_error'></div>
        </form>
        
        <form>
          <details id="load-dict-details">
            <summary>Ou explorer d'autres orthographes</summary>
            <span> Notez que ces orthographes ne sont pas des recommendations (ni des
                   futures recommendations), simplement des possibilités d'expérimentation.
            </span>
            <div>
              <input style="display:none" type="checkbox" id="load-checkbox" name="load-checkbox">
              <label class="btn" for="load-checkbox" id="load-checkbox-label">
                Charger la sélection (rien de sélectionné)
              </label>
              <div style="display:inline-block">
                <div class="idle" id="floatingCirclesG">
                  <div class="f_circleG" id="frotateG_01"></div>
                  <div class="f_circleG" id="frotateG_02"></div>
                  <div class="f_circleG" id="frotateG_03"></div>
                  <div class="f_circleG" id="frotateG_04"></div>
                  <div class="f_circleG" id="frotateG_05"></div>
                  <div class="f_circleG" id="frotateG_06"></div>
                  <div class="f_circleG" id="frotateG_07"></div>
                  <div class="f_circleG" id="frotateG_08"></div>
                </div>
              </div>
            </div>
          </details>
          <div id='load_error'></div>
        </form>
      </div>

      <br>

      <details>
        <summary>Pour débugger</summary>
        <div>
          <input type="checkbox" id="disable-watch-checkbox" name="disable-watch-checkbox">
          <label for="disable-watch-checkbox">désactiver la réécriture quand la page change</label>
        </div>

        <div>
          <input type="checkbox" id="trivial-checkbox" name="trivial-checkbox">
          <label for="trivial-checkbox">réécrire les "a" en "X"</label>
        </div>
        <div>
          <input type="checkbox" id="debug-changes-checkbox" name="debug-changes-checkbox">
          <label for="debug-changes-checkbox">plus de logs à propos des mutations du DOM</label>
        </div>
        <div>
          <input type="checkbox" id="debug-language-checkbox" name="debug-language-checkbox">
          <label for="debug-language-checkbox">plus de logs à propos de la détection de la langue</label>
        </div>
        <div>
          <input type="checkbox" id="debug-lang-test-checkbox" name="debug-lang-test-checkbox">
          <label for="debug-lang-test-checkbox">utiliser la détection de langue faite maison</label>
        </div>
        <br>
        <pre><code id=debug-info>?</code></pre>
      </details>
      <div id='error'></div>
    </fieldset>
    </form>

    <script src="dict_gen.bc.js"></script>
    <script src="options.js"></script>
  </body>
</html>
